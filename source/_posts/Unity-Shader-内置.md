---
title: Unity - Shader - å†…ç½®
date: 2026-01-07 11:13:21
tags: ['Unity', 'Shader', 'å†…ç½®å˜é‡', 'å†…ç½®æ–¹æ³•']
---

# å†…ç½®å˜é‡

## \_Time

\_Time æ˜¯ Unity è‡ªåŠ¨ä¼ é€’ç»™ Shader çš„æ—¶é—´å˜é‡ï¼Œå®ƒæ˜¯ä¸€ä¸ª float4 ç±»å‹ï¼ˆåŒ…å« 4 ä¸ªæµ®ç‚¹æ•°ï¼‰ã€‚

### \_Time çš„ 4 ä¸ªåˆ†é‡

| åˆ†é‡     | å…¬å¼     | ç”¨é€”             | ä¸¾ä¾‹å€¼ï¼ˆè¿è¡Œ 5 ç§’åï¼‰ |
| -------- | -------- | ---------------- | --------------------- |
| \_Time.x | t / 20ï¼‰ | æ…¢é€ŸåŠ¨ç”»         | 0.25                  |
| \_Time.y | t        | æœ€å¸¸ç”¨ï¼Œæ­£å¸¸é€Ÿåº¦ | 5.0                   |
| \_Time.z | t \* 2   | 2 å€é€ŸåŠ¨ç”»       | 10.0                  |
| \_Time.w | t \* 3   | 3 å€é€ŸåŠ¨ç”»       | 15.0                  |

> ä¸ºä»€ä¹ˆæœ€å¸¸ç”¨\_Time.y

å› ä¸ºå®ƒå°±æ˜¯åŸå§‹æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œæœ€ç›´è§‚ï¼

# å†…ç½®æ–¹æ³•

## length()

length() æ˜¯ Shader å†…ç½®å‡½æ•°ï¼Œç”¨æ¥è®¡ç®—å‘é‡çš„é•¿åº¦ï¼ˆä¹Ÿå«æ¨¡æˆ–è·ç¦»ï¼‰ã€‚

æ•°å­¦åŸç†

```cpp
float2 v = float2(3, 4);
float len = length(v);

// å†…éƒ¨è®¡ç®—ï¼š
// len = âˆš(xÂ² + yÂ²)
// len = âˆš(3Â² + 4Â²)
// len = âˆš(9 + 16)
// len = âˆš25
// len = 5
```

ä¸ºä»€ä¹ˆä¸­å¿ƒæ˜¯(0, 0)è€Œä¸æ˜¯(0.5, 0.5)ï¼Ÿ
å…³é”®ï¼šåæ ‡ç³»å˜æ¢ï¼
å›é¡¾ä»£ç ï¼š

float2 centered = i.uv - 0.5;
è¿™è¡Œä»£ç æ”¹å˜äº†åæ ‡ç³»çš„åŸç‚¹ï¼

ğŸ“ åæ ‡ç³»å˜æ¢è¯¦è§£
åŸå§‹ UV åæ ‡ç³»ï¼ˆå·¦ä¸‹è§’æ˜¯åŸç‚¹ï¼‰

i.uv çš„èŒƒå›´ï¼š

```
(0,1) â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â” (1,1)
      â”‚        â”‚        â”‚
      â”‚        â”‚        â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚        â”‚        â”‚
      â”‚        â”‚        â”‚
(0,0) â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜ (1,0)
 â†‘
```

åŸç‚¹åœ¨å·¦ä¸‹è§’

å±å¹•ä¸­å¿ƒçš„åæ ‡ï¼ši.uv = (0.5, 0.5)
å‡å» 0.5 åï¼ˆcentered åæ ‡ç³»ï¼Œä¸­å¿ƒæ˜¯åŸç‚¹ï¼‰

```
centered = i.uv - 0.5;

(-0.5,0.5) â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â” (0.5,0.5)
           â”‚        â”‚        â”‚
           â”‚        â”‚        â”‚
(-0.5,0)   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤ (0.5,0)
           â”‚        â”‚  (0,0) â”‚
           â”‚        â”‚   â†‘    â”‚
(-0.5,-0.5)â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜ (0.5,-0.5)
                    åŸç‚¹åœ¨ä¸­å¿ƒï¼
```

å±å¹•ä¸­å¿ƒçš„åæ ‡ï¼šcentered = (0, 0)

### ğŸ§® å…·ä½“ä¾‹å­è®¡ç®—

ä¾‹å­ 1ï¼šå±å¹•ä¸­å¿ƒç‚¹

```
// åŸå§‹UVåæ ‡
i.uv = (0.5, 0.5)

// å‡å»0.5
centered = (0.5 - 0.5, 0.5 - 0.5)
         = (0, 0)

// è®¡ç®—è·ç¦»
dist = length(centered)
     = length((0, 0))
     = âˆš(0Â² + 0Â²)
     = âˆš0
     = 0
```

æ‰€ä»¥ä¸­å¿ƒç‚¹çš„è·ç¦»æ˜¯ 0ï¼ âœ…
ä¾‹å­ 2ï¼šå±å¹•å³è¾¹ä¸­ç‚¹

```
// åŸå§‹ UV åæ ‡ï¼ˆå±å¹•å³è¾¹ä¸­ç‚¹ï¼‰
i.uv = (1.0, 0.5)

// å‡å» 0.5
centered = (1.0 - 0.5, 0.5 - 0.5)
= (0.5, 0)

// è®¡ç®—è·ç¦»
dist = length((0.5, 0))
= âˆš(0.5Â² + 0Â²)
= âˆš0.25
= 0.5

```

å±å¹•è¾¹ç¼˜è·ç¦»ä¸­å¿ƒ 0.5 å•ä½
ä¾‹å­ 3ï¼šå±å¹•å³ä¸Šè§’

```
// åŸå§‹ UV åæ ‡ï¼ˆå³ä¸Šè§’ï¼‰
i.uv = (1.0, 1.0)

// å‡å» 0.5
centered = (1.0 - 0.5, 1.0 - 0.5)
= (0.5, 0.5)

// è®¡ç®—è·ç¦»
dist = length((0.5, 0.5))
= âˆš(0.5Â² + 0.5Â²)
= âˆš(0.25 + 0.25)
= âˆš0.5
â‰ˆ 0.707
```

å±å¹•è§’è½è·ç¦»ä¸­å¿ƒæœ€è¿œï¼Œçº¦ 0.707
ğŸ“Š è·ç¦»åˆ†å¸ƒå›¾

å±å¹•å„ä¸ªä½ç½®åˆ°ä¸­å¿ƒçš„è·ç¦»ï¼š

```
0.707 â”Œâ”€â”€â”€â”€â”€â”€0.5â”€â”€â”€â”€â”€â”€â” 0.707
      â”‚               â”‚
 0.5  â”‚      0.0      â”‚ 0.5
      â”‚       â—       â”‚  â† ä¸­å¿ƒè·ç¦»=0
      â”‚               â”‚
0.707 â””â”€â”€â”€â”€â”€â”€0.5â”€â”€â”€â”€â”€â”€â”˜ 0.707
```

è·ç¦»è¶Šäº®ï¼Œé¢œè‰²è¶Šç™½ï¼š

```
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â† è§’è½ï¼ˆ0.707ï¼Œæœ€äº®ï¼‰
â–ˆâ–ˆâ–ˆâ–ˆ â† è¾¹ç¼˜ï¼ˆ0.5ï¼‰
â–ˆâ–ˆ â† é è¿‘ä¸­å¿ƒï¼ˆ0.2ï¼‰
â–“ â† ä¸­å¿ƒï¼ˆ0ï¼Œé»‘è‰²ï¼‰
```

## step()

step() å‡½æ•°è¯¦è§£

```
step(edge, x)
// å¦‚æœ x < edge  â†’ è¿”å› 0
// å¦‚æœ x >= edge â†’ è¿”å› 1
```

ä¾‹å­ï¼š

```
step(0.5, 0.3)  // 0.3 < 0.5  â†’ è¿”å› 0
step(0.5, 0.5)  // 0.5 >= 0.5 â†’ è¿”å› 1
step(0.5, 0.8)  // 0.8 >= 0.5 â†’ è¿”å› 1
æ³¨æ„å‚æ•°é¡ºåºï¼š

step(0.3, dist)  // dist >= 0.3 æ—¶è¿”å›1ï¼ˆåœ†å¤–ï¼‰
step(dist, 0.3)  // dist < 0.3 æ—¶è¿”å›1ï¼ˆåœ†å†…ï¼‰
      â†‘     â†‘
    é˜ˆå€¼   è¢«æ¯”è¾ƒçš„å€¼
```

## smoothstep()

å‡½æ•°åŸå‹

smoothstep(min, max, x)
è¿”å›å€¼

x <= min â†’ è¿”å› 0
x >= max â†’ è¿”å› 1
min < x < max â†’ å¹³æ»‘æ’å€¼ï¼ˆS æ›²çº¿ï¼‰

å®é™…ä¾‹å­

```
smoothstep(0.2, 0.3, 0.1)   // 0.1 < 0.2  â†’ è¿”å› 0
smoothstep(0.2, 0.3, 0.25)  // 0.2-0.3ä¹‹é—´ â†’ è¿”å› 0.5
smoothstep(0.2, 0.3, 0.35)  // 0.35 > 0.3 â†’ è¿”å› 1
```

```
float2 centered = i.uv - 0.5;
float dist = length(centered);

// smoothstep(min, max, x)
// x < min â†’ è¿”å› 0
// x > max â†’ è¿”å› 1
// min < x < max â†’ å¹³æ»‘è¿‡æ¸¡ï¼ˆ0åˆ°1ï¼‰
float mask = smoothstep(0.3, 0.25, dist);
//                       â†‘    â†‘
//                     å¤–è¾¹ç•Œ å†…è¾¹ç•Œ

fixed4 colorInside = fixed4(1, 0, 0, 1);
fixed4 colorOutside = fixed4(0, 0, 1, 1);

return lerp(colorOutside, colorInside, mask);
æ•ˆæœå¯¹æ¯”ï¼š

stepï¼ˆç¡¬è¾¹ç¼˜ï¼‰ï¼š          smoothstepï¼ˆè½¯è¾¹ç¼˜ï¼‰ï¼š
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                 â–ˆâ–ˆâ–ˆâ–“â–“â–“â–ˆâ–ˆ  â† æœ‰æ¸å˜è¿‡æ¸¡
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                 â–ˆâ–ˆâ–“â–“â–“â–“â–“â–ˆ
è¾¹ç¼˜é”åˆ©                  è¾¹ç¼˜æŸ”å’Œ
```

## lerp()

Lerp = Linear Interpolationï¼ˆçº¿æ€§æ’å€¼ï¼‰ ç®€å•è¯´ï¼šåœ¨ä¸¤ä¸ªå€¼ä¹‹é—´æŒ‰æ¯”ä¾‹æ··åˆã€‚
ğŸ“ å‡½æ•°åŸå‹

lerp(a, b, t)
å‚æ•°

- aï¼šèµ·å§‹å€¼
- bï¼šç»“æŸå€¼
- tï¼šæ’å€¼ç³»æ•°ï¼ˆé€šå¸¸ 0-1 ä¹‹é—´ï¼‰
  è¿”å›å€¼
```
result = a + (b - a) _ t
// æˆ–è€…å†™æˆï¼š
result = a _ (1 - t) + b \* t
```

### ğŸ§® æ•°å­¦åŸç†

å…¬å¼æ¨å¯¼

```
å½“ t = 0ï¼š
result = a * (1 - 0) + b * 0
       = a * 1 + b * 0
       = a           â† è¿”å›èµ·å§‹å€¼

å½“ t = 1ï¼š
result = a * (1 - 1) + b * 1
       = a * 0 + b * 1
       = b           â† è¿”å›ç»“æŸå€¼

å½“ t = 0.5ï¼š
result = a * 0.5 + b * 0.5
       = (a + b) / 2  â† è¿”å›ä¸­é—´å€¼
```
