---
title: Unity - Shader
date: 2026-01-07 11:43:28
tags: ['Unity', 'Shader']
---

## UV è¶…è¿‡ 1 ä¼šå‘ç”Ÿä»€ä¹ˆ

ç­”æ¡ˆæ˜¯ï¼šå–å†³äºçº¹ç†çš„ Wrap Mode è®¾ç½®ï¼
ğŸ“Š ä¸‰ç§ Wrap Mode

1. Repeatï¼ˆé‡å¤ï¼‰- é»˜è®¤æ¨¡å¼

```
uv.x += _Time.y * 0.2;
// æ—¶é—´    uv.xå€¼    å®é™…é‡‡æ ·ä½ç½®
// 0ç§’     0.0       0.0
// 5ç§’     1.0       0.0ï¼ˆå½’é›¶é‡å¤ï¼‰
// 7.5ç§’   1.5       0.5ï¼ˆ1.5 - 1 = 0.5ï¼‰
// 10ç§’    2.0       0.0ï¼ˆåˆå½’é›¶ï¼‰
```

åŸç†ï¼šGPU ä¼šè‡ªåŠ¨æ‰§è¡Œ frac(uv.x)

```
// å†…éƒ¨å®é™…æ‰§è¡Œ
float actualUV = frac(uv.x);
// frac å–å°æ•°éƒ¨åˆ†ï¼š
// frac(1.3) = 0.3
// frac(2.7) = 0.7
// frac(5.0) = 0
```

æ•ˆæœï¼šçº¹ç†ä¼šæ— é™å¾ªç¯å¹³é“ºï¼Œåƒä¼ é€å¸¦ä¸€æ ·ã€‚

2. Clampï¼ˆé’³åˆ¶ï¼‰

```
// å¦‚æœçº¹ç†è®¾ç½®ä¸ºClampæ¨¡å¼
uv.x += _Time.y * 0.2;
// æ—¶é—´    uv.xå€¼    å®é™…é‡‡æ ·ä½ç½®
// 0ç§’     0.0       0.0
// 5ç§’     1.0       1.0ï¼ˆåˆ°è¾¾è¾¹ç¼˜ï¼‰
// 10ç§’    2.0       1.0ï¼ˆå¡åœ¨è¾¹ç¼˜ï¼Œä¸å†å¢åŠ ï¼‰
```

åŸç†ï¼šGPU ä¼šæ‰§è¡Œ clamp(uv.x, 0, 1)

```
// å†…éƒ¨å®é™…æ‰§è¡Œ
float actualUV = clamp(uv.x, 0, 1);
// clamp é™åˆ¶åœ¨èŒƒå›´å†…ï¼š
// clamp(1.5, 0, 1) = 1.0
// clamp(-0.3, 0, 1) = 0.0
```

æ•ˆæœï¼šçº¹ç†è¾¹ç¼˜ä¼šè¢«æ‹‰ä¼¸ï¼Œåƒ"å®šæ ¼"åœ¨æœ€åä¸€ä¸ªåƒç´ ã€‚

3. Mirrorï¼ˆé•œåƒï¼‰

```
// å¦‚æœçº¹ç†è®¾ç½®ä¸ºMirroræ¨¡å¼
uv.x += _Time.y * 0.2;
// æ—¶é—´    uv.xå€¼    å®é™…é‡‡æ ·ä½ç½®
// 0ç§’     0.0       0.0
// 5ç§’     1.0       1.0
// 10ç§’    2.0       0.0ï¼ˆé•œåƒç¿»è½¬ï¼‰
// 15ç§’    3.0       1.0ï¼ˆå†æ¬¡ç¿»è½¬ï¼‰
```

æ•ˆæœï¼šçº¹ç†ä¼šæ­£å‘ â†’ åå‘ â†’ æ­£å‘å¾ªç¯æ’­æ”¾ï¼Œåƒä¹’ä¹“çƒä¸€æ ·æ¥å›ã€‚

## æ—‹è½¬çŸ©é˜µæ•°å­¦çŸ¥è¯†

æ•°å­¦å…¬å¼

```
[ rotated.x ] = [ c  -s ] [ centered.x ]
[ rotated.y ] = [ s   c ] [ centered.y ]
```

ä¸ºä»€ä¹ˆå…¬å¼æ˜¯è¿™æ ·çš„ï¼Ÿ
æƒ³è±¡ä¸€ä¸ªç‚¹ (x, y) åœ¨æåæ ‡ä¸­ï¼š

åŸå§‹ç‚¹ï¼š
r = âˆš(xÂ² + yÂ²) â† è·ç¦»åŸç‚¹çš„è·ç¦»
Î¸ = atan2(y, x) â† è§’åº¦

æ—‹è½¬ Î± åº¦åï¼š
æ–°è§’åº¦ = Î¸ + Î±
æ–°åæ ‡ = (rÂ·cos(Î¸+Î±), rÂ·sin(Î¸+Î±))

ç”¨ä¸‰è§’æ’ç­‰å¼å±•å¼€ï¼š
cos(Î¸+Î±) = cos(Î¸)cos(Î±) - sin(Î¸)sin(Î±)
sin(Î¸+Î±) = sin(Î¸)cos(Î±) + cos(Î¸)sin(Î±)

ä»£å…¥ x=rÂ·cos(Î¸), y=rÂ·sin(Î¸)ï¼š
æ–° x = xÂ·cos(Î±) - yÂ·sin(Î±)
æ–° y = xÂ·sin(Î±) + yÂ·cos(Î±)

è¿™å°±æ˜¯æ—‹è½¬çŸ©é˜µçš„å…¬å¼ï¼

```cpp
// å°†UVä¸­å¿ƒç§»åˆ°(0.5, 0.5)
float2 centered = i.uv - 0.5;
// æ¯ç§’æ—‹è½¬1å¼§åº¦
float angle = _Time.y;
// æ—‹è½¬çŸ©é˜µçš„å‚æ•°
float s = sin(angle);
float c = cos(angle);

float2 rotated;
rotated.x = centered.x * c - centered.y * s;
rotated.y = centered.x * s + centered.y * c;
// å°†æ—‹è½¬åçš„åæ ‡å†ç§»å›(0, 0)
float2 uv = rotated + 0.5;
```

## shader ä½¿ç”¨é€æ˜æè´¨
```
{
    Properties
    {
    }

    SubShader
    {
        Tags { "RenderType" = "Transparent" "RenderPipeline" = "UniversalPipeline" }

        Blend SrcAlpha OneMinusSrcAlpha
        ZWrite Off
    }
}
```